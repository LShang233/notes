# 谢愫 广东工业大学 15118173775



# 1、vue-cli搭建Node koa

**题目：**在 vue 项目中，我们常用 vue-cli，假如小明想要一个类似 vue-cli 的脚手架来创建一个 Node koa 项目，便于快速 开发，请实现一个这样的 cli 程序。 要求： 1. 可以选择是否使用 typescript。 2. 可以选择是否有数据库模块。 （50 分） 



脚手架的功能是创建package.json文件、入口文件index.js、koa相关内容、以及下载koa所需要的第三方依赖包

根据需求，与用户交互时，不仅要询问项目名，还需选择是否使用 typescript、是否有数据库模块

最后根据用户的输入进行配置



可以理解为我们有一个完整的模板文件，根据用户输入的输入，进行了一些修改，最后返回给我们一个新的模板文件

所以，最最简单的，你甚至可以根据用户的操作，使用node的文件模块对配置文件直接进行字符串修改，然后根据配置文件下载node_modules

但可以用更为完善的第三方插件进行中间如用户交互，自动创建文件等操作

比如inquirer插件可以实现用户交互、获取用户输入等操作，execa插件可以执行yarn命令，并完成依赖包安装



最后，如果想让这个脚手架给更多的人使用，可以将包发布到npm上





# 2、滚动底部自动加载

**题目：**设计一个滚动到底部自动加载下一页数据的方案，并给出优劣分析，场景可自行模拟。（50分）



类似于虚拟滚动，可以简单分为两步

1. 监听是否到达底部
2. 加载下一页数据



## **监听是否到达底部**

也可以理解为最底部的节点是否在可视区内，最底部的节点可以是最后一个数据，但我认为可以是最底下的loading节点，每次插入后将loading顶到最底层，也不需要更换节点

那么监听可以分为以下几种方法

**1、利用offsetTop、scrollTop**

offsetTop即元素的上外边框至包含元素的上内边框之间的像素距离

scrollTop属性既可以确定元素当前滚动的状态

二者之差小于窗口高度的时候，表示当前元素位于可视窗口内

但是调用的时候为了获取准确的数据，会强制计算整个页面的布局

同时，需要使用onscroll 方法监听用户滚动，每次滚动都要判断是否到可视区内

**2、Intersection Observer**

表示重叠观察者，判断两个元素是否重叠

当节点与可视窗口重叠的时候就进入页面

这种方法不需要使用onscroll ，因为他本身就是观察者，会自行执行回调函数

**3、getBoundingClientRect**

可以获取节点在页面的位置，有点类似于第一种方法

但是调用的时候为了获取准确的数据，会强制回流

同时，需要使用onscroll 方法监听用户滚动，每次滚动都要判断是否到可视区内



## 加载下一页数据

根据需求，无论是从内存中取出，还是发起异步请求，获取数据后生成节点，并将其插入合适位置

如果需要提高响应速度，可以预获取一页的数据，那么在上一页到达底部的时候，直接从内存中取出上一次获取的数据插入，同时获取下一页的数据

