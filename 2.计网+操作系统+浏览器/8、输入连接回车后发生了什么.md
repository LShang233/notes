https://zhuanlan.zhihu.com/p/133906695

# 1、浏览器查看缓存

会出现你浏览过的链接，智能提醒，补全连接

# 2、DNS域名解析

网址转为IP地址

1. 客户端查看本地硬盘缓存，在host文件读取
2. 没有的话，发送DNS请求给本地服务器，一般来说，你连的网络是什么，本地服务器就是什么
3. 本地服务器会查看缓存，一级级向上查找，这个过程是递归查询
4. 如果缓存没有，根服务器会告诉你域服务器的地址，这个过程是迭代查询（拿到.com的地址，再拿到.baidu.com的地址，依次向上）
5. 最后将结果返回给客户端，同时将这个网址和域名留在缓存中

# 3、发送HTTP请求

三次握手

# 4、永久性重定向

301（删除旧地址）域名到期、有不带www的域名  带的没收录  告诉浏览器到底是哪个域名

302（保留旧地址，抓取新内容）当网页要在24~48h内转移的时候

**重定向原因：**更换域名、目录改变、后缀变换等情况

# 5、跟踪重定向

发起http请求资源

# 6、服务器处理请求

后端从在固定的端口接收到TCP报文开始，它会对TCP连接进行处理，对HTTP协议进行解析，并按照报文格式进一步封装成HTTP Request对象，供上层使用

这里会出现后端的处理，如反向代理的负载均衡系统

# 7、服务器返回一个 HTTP 响应

拿到处理结果，下载页面

# 8、显示HTML

在没有完全接收html的时候就开始加载了

边加载边渲染dom树，期间遇见外链的css、图片等数据时会异步下载

dom树构建完成后，构建css渲染树，全部构件完成后加载到页面上

- 回流：计算大小和位置
- 重绘：绘制颜色和字体

遇见js则停止渲染，执行解析完js后再继续



浏览器拿到HTML，先将HTML转换成dom树，再将CSS样式转换成stylesheet，根据dom树和stylesheet创建布局树，对布局树进行分层，为每个图层生成绘制列表，再将图层分成图块，紧接着光栅化将图块转换成位图，最后合成绘制生成页面。
**加分回答**
分层的目的：避免整个页面渲染，把页面分成多个图层，尤其是动画的时候，把动画独立出一个图层，渲染时只渲染该图层就ok，transform，z-index等，浏览器会自动优化生成图层
光栅化目的：页面如果很长但是可视区很小，避免渲染非可视区的样式造成资源浪费，所以将每个图层又划分成多个小个子，当前只渲染可视区附近区域

![img](https://uploadfiles.nowcoder.com/images/20210901/308571_1630491268441/834E2076DE410DB9E5E23B14E7BFAB36)

早期没有分层和光栅化，流程如下
1.解析HTML文件，创建DOM树 2.解析CSS,形成CSS对象模型 3.将CSS与DOM合并，构建渲染树（renderingtree） 4.布局和绘制

![img](https://uploadfiles.nowcoder.com/images/20210901/308571_1630491287702/F5DD00FDA49784A18CB3757ED969C3D5)