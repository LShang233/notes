# 小程序和H5的区别

H5的本质是网页，所以脱离不了浏览器的限制

而小程序是依赖于微信APP的，所以他能做到H5不能做到的东西。同时他有微信自带的api，包括消息推送、震动，以及更好的支付功能和分享功能

也正是因为如此，小程序不需要考虑自身的跨平台性，一套规则就能在所有的机型上使用；而H5需要考虑不同浏览器的兼容问题

其次，H5运行在浏览器，而浏览器是单线程的，但小程序是双线程，他讲逻辑线程和渲染线程分离，其目的一是为了让小程序更快，二是为了保护用户，让用户不那么轻易的获取到小程序的信息

# 小程序的双线程

![image-20220419093518667](C:\Users\lshan\AppData\Roaming\Typora\typora-user-images\image-20220419093518667.png)

逻辑x1与渲染xn

通过native（微信APP）通信

逻辑将数据处理好通过setstate传给native，native再进行转发

# 为什么使用双线程

为了快，js不会阻塞

为了安全，一些隐私数据希望是只读的，于是将其隔离开来，让逻辑线程只处理js代码，而不乏直接操作渲染线程

# 小程序怎么通信

通过native进行通信，逻辑线程将数据传给native，通过native转发给渲染线程

如果是一些网络请求，会通过native进行请求